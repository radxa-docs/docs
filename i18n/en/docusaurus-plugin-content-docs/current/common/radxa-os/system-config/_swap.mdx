Radxa OS enables a swap **partition** by default, with a size of about **half of the physical memory**, which is usually enough for most daily use cases.

When the device has relatively small RAM and you occasionally run heavy workloads, you can **add an extra swap file** on top of the default swap partition as a temporary extension and safety buffer.

The following describes how to add a simple swap file on a Radxa device.

:::caution Note
Swap is only a **fallback** mechanism. It will slow down the system and increase write wear on eMMC/SD/SSD. Long‑term reliance on swap is not recommended.
:::

## 1. When do you need swap?

- RAM is small, and you occasionally compile large projects or run memory‑hungry programs
- You want to reduce the chance of the system going OOM and crashing when memory usage spikes

If you care about extreme performance or flash lifetime, you can also choose not to enable swap at all.

## 2. Check current memory and swap

<NewCodeBlock tip={`radxa@${props?.board ?? 'device'}$`} type="device">

```
free -h
sudo swapon --show
```

</NewCodeBlock>

If `swapon --show` prints nothing, it means no swap is currently enabled.

## 3. Create and enable a swap file (2G example)

<NewCodeBlock tip={`radxa@${props?.board ?? 'device'}$`} type="device">

```
sudo fallocate -l 2G /swapfile    # create file
sudo chmod 600 /swapfile          # only root can access
sudo mkswap /swapfile             # format as swap
sudo swapon /swapfile             # enable immediately
```

</NewCodeBlock>

Verify:

<NewCodeBlock tip={`radxa@${props?.board ?? 'device'}$`} type="device">

```
swapon --show
free -h
```

</NewCodeBlock>

## 4. Enable the swap file at boot

First, back up `fstab` (recommended):

<NewCodeBlock tip={`radxa@${props?.board ?? 'device'}$`} type="device">

```
sudo cp /etc/fstab /etc/fstab.bak
```

</NewCodeBlock>

Edit `fstab`:

<NewCodeBlock tip={`radxa@${props?.board ?? 'device'}$`} type="device">

```
sudo vim /etc/fstab
```

</NewCodeBlock>

Add the following line at the end of the file:

<NewCodeBlock tip={`radxa@${props?.board ?? 'device'}$`} type="device">

```
/swapfile none swap sw 0 0
```

</NewCodeBlock>

Save and exit, then test whether the configuration works:

<NewCodeBlock tip={`radxa@${props?.board ?? 'device'}$`} type="device">

```
sudo swapoff /swapfile
sudo swapon -a
sudo swapon --show
```

</NewCodeBlock>

If `/swapfile` appears in the output, the `fstab` configuration is valid and has no syntax errors.

:::tip
`swapon -a` re‑enables all swap devices according to `/etc/fstab`. It is a safe way to verify that your configuration is correct.
:::

## 5. Disable and remove the swap file

If you no longer need the swap file, follow these steps to disable and remove it:

1. Turn off swap:

<NewCodeBlock tip={`radxa@${props?.board ?? 'device'}$`} type="device">

```
   sudo swapoff /swapfile
```

</NewCodeBlock>

2. Edit `/etc/fstab` and remove or comment out the line:

<NewCodeBlock tip={`radxa@${props?.board ?? 'device'}$`} type="device">

```
   /swapfile none swap sw 0 0
```

</NewCodeBlock>

3. Delete the file:

<NewCodeBlock tip={`radxa@${props?.board ?? 'device'}$`} type="device">

```
   sudo rm /swapfile
```

</NewCodeBlock>

After these steps, the system will go back to running without this swap file.
