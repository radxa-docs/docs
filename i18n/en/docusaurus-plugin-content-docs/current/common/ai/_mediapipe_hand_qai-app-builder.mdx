This document describes how to use the [QAI AppBuilder](../qai-appbuilder) Python API to run inference with the [MediaPipe-Hand-Detection](https://aihub.qualcomm.com/models/mediapipe_hand) hand pose recognition model on Qualcomm® Hexagon™ Processor (NPU).

**Supported Devices**

| Device                | SoC     |
| --------------------- | ------- |
| Fogwise® AIRbox Q900 | QCS9075 |

## Install QAI AppBuilder

:::tip

1. Please install QAI AppBuilder according to [**QAI AppBuilder Installation Guide**](../qai-appbuilder#installation-methods).

2. Please configure QAIRT environment variables according to [**Configure QAIRT Environment Variables**](../qai-appbuilder#configure-qairt-environment-variables).
   :::

## Run the Example

### Install Dependencies

<NewCodeBlock tip="Device" type="device">

```bash
pip3 install requests tqdm qai-hub py3_wget opencv-python torch torchvision matplotlib easyocr qai_hub_models pygame
```

</NewCodeBlock>

### Run the Script

- Navigate to the example directory

    <Tabs>

        <TabItem value="QCS9075">

       <NewCodeBlock tip="Device" type="device">

        ```bash
        cd ai-engine-direct-helper/samples/python
        ```

        </NewCodeBlock>

    </TabItem>

    </Tabs>

- Prepare input image. The following image is used as an example:

  {" "}

  <div style={{ textAlign: "center" }}>
    <img
      src="/en/img/fogwise/airbox-q900/qairt_mediapipe_hand_input.webp"
      style={{ width: "65%" }}
    />
    input image
  </div>

- Run inference

    <NewCodeBlock tip="Device" type="device">

  ```bash
  python3 mediapipe_hand/mediapipe_hand.py --imagefile ./mediapipe_hand/hand.jpg
  ```

    </NewCodeBlock>

  ```bash
  $ python3 mediapipe_hand/mediapipe_hand.py --imagefile ./mediapipe_hand/hand.jpg
  /mnt/ssd/qualcomm/702/zzf_fork/test/ai-engine-direct-helper/.venv/lib/python3.12/site-packages/pygame/pkgdata.py:25: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
    from pkg_resources import resource_stream, resource_exists
  pygame 2.6.1 (SDL 2.28.4, Python 3.12.3)
  Hello from the pygame community. https://www.pygame.org/contribute.html
  Press ESC key to exit if you are opening camera app.
       0.0ms [WARNING]  <W> Initializing HtpProvider

  /prj/qct/webtech_scratch20/mlg_user_admin/qaisw_source_repo/rel/qairt-2.37.1/point_release/SNPE_SRC/avante-tools/prebuilt/dsp/hexagon-sdk-5.5.5/ipc/fastrpc/rpcmem/src/rpcmem_android.c:38:dummy call to rpcmem_init, rpcmem APIs will be used from libxdsprpc
       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

     110.2ms [WARNING] Time: Read model file to memory. 2.70

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

     133.4ms [WARNING] Time: contextCreateFromBinary. 23.04

     133.4ms [WARNING] Time: UnmapViewOfFile. 0.00

     133.9ms [WARNING] Time: model_initialize hand_detector 133.82

     191.3ms [WARNING] Time: Read model file to memory. 3.24

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

     204.0ms [WARNING] Time: contextCreateFromBinary. 12.63

     204.1ms [WARNING] Time: UnmapViewOfFile. 0.00

     205.1ms [WARNING] Time: model_initialize landmark_detector 17.40

     242.5ms [WARNING] Time: model_inference hand_detector 2.86

     255.1ms [WARNING] Time: model_inference landmark_detector 2.10

  /mnt/ssd/qualcomm/702/zzf_fork/test/ai-engine-direct-helper/samples/python/mediapipe_hand/mediapipe_hand.py:906: DeprecationWarning: 'mode' parameter is deprecated and will be removed in Pillow 13 (2026-10-15)
    out_image = Image.fromarray(pred_image[0], "RGB")

  Demo image display is disabled by default for remote servers. To override, set `QAIHM_ALWAYS_DISPLAY_OUTPUT=1` in your environment.

  Saving image to /mnt/ssd/qualcomm/702/zzf_fork/test/ai-engine-direct-helper/samples/python/build/image.png
       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

     314.1ms [WARNING] Time: model_destroy hand_detector 11.84

   <W> Logs will be sent to the system's default channel
       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

  /prj/qct/webtech_scratch20/mlg_user_admin/qaisw_source_repo/rel/qairt-2.37.1/point_release/SNPE_SRC/avante-tools/prebuilt/dsp/hexagon-sdk-5.5.5/ipc/fastrpc/rpcmem/src/rpcmem_android.c:42:dummy call to rpcmem_deinit, rpcmem APIs will be used from libxdsprpc
     389.4ms [WARNING] Time: model_destroy landmark_detector 75.05
  ```

  {" "}

  <div style={{ textAlign: "center" }}>
    <img
      src="/en/img/fogwise/airbox-q900/qairt_mediapipe_hand_output.webp"
      style={{ width: "65%" }}
    />
    output image
  </div>
