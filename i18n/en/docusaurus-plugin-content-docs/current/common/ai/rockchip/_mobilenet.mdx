## Environment Setup

:::info
Follow [RKNN Installation](./rknn-install) to set up the environment.

Follow [RKNN Model Zoo](./rknn-model-zoo) to download the example files.
:::

## Model Download

Download the ONNX model file.

<NewCodeBlock tip="X64 Linux PC" type="pc">

```bash
cd rknn_model_zoo/examples/mobilenet/model/
bash download_model.sh
```

</NewCodeBlock>

## Model Conversion

Select the target platform.

<Tabs>

<TabItem value="rk3588">

<NewCodeBlock tip="X64 Linux PC" type="pc">

```bash
export TARGET_PLATFORM=rk3588
```

</NewCodeBlock>

</TabItem>

<TabItem value="rk356x">

<NewCodeBlock tip="X64 Linux PC" type="pc">

```bash
export TARGET_PLATFORM=rk356x
```

</NewCodeBlock>

</TabItem>

</Tabs>

Convert the ONNX model to an RKNN model.

:::tip
After running the conversion script, you can see the model output.
:::

<NewCodeBlock tip="X64 Linux PC" type="pc">

```bash
cd ../python/
python mobilenet.py --model ../model/mobilenetv2-12.onnx --target ${TARGET_PLATFORM}
```

</NewCodeBlock>

Model output:

```bash
-----TOP 5-----
[494] score=0.98 class="n03017168 chime, bell, gong"
[653] score=0.01 class="n03764736 milk can"
[469] score=0.00 class="n02939185 caldron, cauldron"
[505] score=0.00 class="n03063689 coffeepot"
[463] score=0.00 class="n02909870 bucket, pail"
```

## C API

### Build the Example

Go to the rknn_model_zoo directory and run build-linux.sh to build.

<NewCodeBlock tip="X64 Linux PC" type="pc">

```bash
cd ../../..
bash build-linux.sh -t ${TARGET_PLATFORM} -a aarch64 -d mobilenet
```

</NewCodeBlock>

### Sync Files to the Device

Copy the built demo directory under the install folder to the device.

<NewCodeBlock tip="X64 Linux PC" type="pc">

```bash
cd install/${TARGET_PLATFORM}_linux_aarch64/
scp -r rknn_mobilenet_demo/ user@your_device_ip:target_directory
```

</NewCodeBlock>

### Run the Example

Export the runtime libraries to the environment variable.

<NewCodeBlock tip="Device" type="device">

```bash
cd rknn_mobilenet_demo/
export LD_LIBRARY_PATH=./lib
```

</NewCodeBlock>

Run the example.

<NewCodeBlock tip="Device" type="device">

```bash
./rknn_mobilenet_demo ./model/mobilenet_v2.rknn ./model/bell.jpg
```

</NewCodeBlock>

```bash
$ ./rknn_mobilenet_demo ./model/mobilenet_v2.rknn ./model/bell.jpg
num_lines=1001
model input num: 1, output num: 1
input tensors:
  index=0, name=input, n_dims=4, dims=[1, 224, 224, 3], n_elems=150528, size=150528, fmt=NHWC, type=INT8, qnt_type=AFFINE, zp=-14, scale=0.018658
output tensors:
  index=0, name=output, n_dims=2, dims=[1, 1000, 0, 0], n_elems=1000, size=1000, fmt=UNDEFINED, type=INT8, qnt_type=AFFINE, zp=-55, scale=0.141923
model is NHWC input fmt
model input height=224, width=224, channel=3
origin size=500x333 crop size=496x320
input image: 500 x 333, subsampling: 4:4:4, colorspace: YCbCr, orientation: 1
src width is not 4/16-aligned, convert image use cpu
finish
rknn_run
[494] score=0.993227 class=n03017168 chime, bell, gong
[469] score=0.002560 class=n02939185 caldron, cauldron
[747] score=0.000466 class=n04023962 punching bag, punch bag, punching ball, punchball
[792] score=0.000466 class=n04208210 shovel
[618] score=0.000405 class=n03633091 ladle
```

This output indicates the model classifies this image as **bell, gong** 的图片。

### Test Image

![](/img/rock5b/ai/mobilenet-test.webp)

## Python API

This example does not provide a standalone Python API script; you can implement one yourself.
