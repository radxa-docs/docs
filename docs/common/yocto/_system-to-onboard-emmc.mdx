## 系统镜像

需提前准备好 Yocto 项目构建的 <code>{`core-image-minimal-rockchip-${props?.soc ?? "<soc>"}-${props?.board_name ?? "<board_name>"}.rootfs.wic`}</code> 镜像文件。

:::tip 构建系统

Yocto 项目构建步骤可以参考 [构建系统](../build-system) 文档。

:::

## 安装系统到板载 eMMC

主要介绍如何使用 [RKDevTool](https://dl.radxa.com/tools/windows/windows_RKDevTool_Release_v3.32.zip) 工具将系统镜像烧录到板载 eMMC 上。

说明：需要确保主板已经进入 Maskrom 模式且被系统正常识别

:::tip

使用 RKDevTool 工具需要确保主板已经进入 Maskrom 模式（主板上电过程中检测到 Maskrom 按键按下主板会自动进入 Maskrom 模式）。

Windows 平台使用 RKDevTool 工需要下载并安装 [Rockchip_DriverAssistant](https://dl.radxa.com/tools/windows/Rockchip_DriverAssitant_v4.8.zip) 驱动。

:::

<Tabs queryString="platform">

<TabItem value="Windows">
在 Windows 平台，我们可以打开 RKDevTool 工具，然后按照以下步骤安装系统到 eMMC 上。

① : 选择主板对应的 Loader 文件

② : 选择 Yocto 项目构建的系统镜像

③ : 选择 `eMMC` 选项作为系统存储介质

④ : 勾选 `Write by Address` 选项

⑤ : 点击 `RUN` 选项执行所有操作

⑥ : 可以通过该界面观察操作进度

<div style={{ textAlign: "left" }}>
  <img
    src="/img/common/tools/rkdevtool/rk-emmc.webp"
    style={{ width: "100%", maxWidth: "700" }}
  />
</div>

断开主板与 PC 的连接，然后重新插拔电源，系统会自动从 eMMC 模块中启动。

</TabItem>

<TabItem value="Linux / MacOS">
在 Linux / MacOS 平台，我们可以终端命令行，然后按照以下步骤安装系统到 eMMC 上。

1. 运行 Loader 文件

将下面命令中的 `demo.bin` 替换为主板对应的 Loader 文件。

<NewCodeBlock tip="Linux / MacOS$" type="host">

```bash
sudo rkdeveloptool db demo.bin
```

</NewCodeBlock>

2. 安装系统镜像

将下面命令中的 `demo.img` 替换为 Yocto 项目构建的系统镜像。

<NewCodeBlock tip="Linux / MacOS$" type="host">

```bash
sudo rkdeveloptool wl 0 demo.img
```

</NewCodeBlock>

3. 重启系统

断开主板与 PC 的连接，然后重新插拔电源，系统会自动从 eMMC 中启动。

<NewCodeBlock tip="Linux / MacOS$" type="host">

```bash
sudo rkdeveloptool rd
```

</NewCodeBlock>

</TabItem>

</Tabs>
