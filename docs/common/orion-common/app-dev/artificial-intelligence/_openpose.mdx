**OpenPose** 是一款开创性的实时多人姿态估计架构。它通过首创的部分亲和字段（PAFs）自底向上（Bottom-Up）的处理机制，打破了传统算法在处理多人场景时计算量随人数增加而大幅提升的局限，实现了对复杂人群中人体骨架的快速重建。

- 核心特点：支持同时对多人进行人体、手部、面部以及足部的关键点提取，具备极强的多尺度感知能力和空间结构建模能力，广泛应用于动作捕获、人机交互、体育竞技分析及安防行为识别等领域。
- 版本说明：本案例采用 OpenPose 标准架构。作为姿态估计领域的基石，它通过双分支网络同时回归关键点热力图与肢体关联向量，有效解决了复杂遮挡与人体交叠情况下的关联难题。凭借其卓越的算法通用性与成熟的生态支持，它依然是目前实现高精度、多维度人体感知任务中最可靠的经典选择。

:::info[板端环境配置]
需要提前配置好板端运行环境并安装相关运行依赖。

- [环境配置](../../../../orion/o6/app-development/artificial-intelligence/env-setup.md)
- [安装依赖-下载必要文件](../../../../orion/o6/app-development/artificial-intelligence/ai-hub.md#下载必要文件)
  :::

## 下载项目文件

运行.py脚本（如download.py）

<NewCodeBlock tip="Linux PC" type="PC">

```python
from modelscope.hub.snapshot_download import snapshot_download

# 参数配置
model_id = 'cix/ai_model_hub_25_Q3'
target_folder = 'models/ComputeVision/Pose_Estimation/onnx_openpose/*'
save_dir = './'

# 执行下载
snapshot_download(
    model_id,
    allow_file_pattern=target_folder,
    local_dir=save_dir
)
```

</NewCodeBlock>

## 项目结构

```txt
├── cfg
├── datasets
├── human-pose-estimation.cix
├── inference_npu.py
├── inference_onnx.py
├── model
├── ReadMe.md
└── test_data
```

## 进行模型量化和转换

<NewCodeBlock tip="Linux PC" type="PC">

```bash
cixbuild cfg/human-pose-estimationbuild.cfg
```

</NewCodeBlock>

:::info[推送到板端]
完成模型转换之后需要将 cix 模型文件以及运行必要文件推送到板端。
:::

## 测试主机推理

### 运行推理脚本

<NewCodeBlock tip="Linux PC" type="PC">

```bash
python3 inference_onnx.py
```

</NewCodeBlock>

### 模型推理结果

<div style={{ display: 'flex', gap: '10px', justifyContent: 'center' }}>

{" "}

<img src="/img/orion/o6/ai-models/openpose_onnx1.webp" height="300" />
<img src="/img/orion/o6/ai-models/openpose_onnx2.webp" height="300" />

</div>

## 进行 NPU 部署

### 运行推理脚本

<NewCodeBlock tip="O6 / O6N" type="device">

```bash
python3 inference_npu.py
```

</NewCodeBlock>

### 模型推理结果

<NewCodeBlock tip="O6 / O6N" type="device">

```bash
$ python3 inference_npu.py
npu: noe_init_context success
npu: noe_load_graph success
Input tensor count is 1.
Output tensor count is 4.
npu: noe_create_job success
npu: noe_clean_job success
npu: noe_unload_graph success
npu: noe_deinit_context success
```

</NewCodeBlock>

<div style={{ display: 'flex', gap: '10px', justifyContent: 'center' }}>

{" "}

<img src="/img/orion/o6/ai-models/openpose_npu1.webp" height="300" />
<img src="/img/orion/o6/ai-models/openpose_npu2.webp" height="300" />

</div>
