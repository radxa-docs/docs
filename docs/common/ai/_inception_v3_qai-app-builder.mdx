此文档讲述使用 [QAI AppBuilder](qai-appbuilder) Python API 利用 Qualcomm® Hexagon™ Processor (NPU) 推理 [Inception-v3](https://aihub.qualcomm.com/models/inception_v3?domain=Computer+Vision&useCase=Image+Classification&chipsets=qualcomm-qcs6490-proxy)
目标识别模型。

**示例支持设备**

| 设备                  | SoC     |
| --------------------- | ------- |
| Dragon Q6A            | QCS6490 |
| Fogwise® AIRbox Q900 | QCS9075 |

## 安装 QAI AppBuilder

:::tip

1. 请根据 [**QAI AppBuilder 安装方法**](qai-appbuilder) 安装 QAI AppBuilder。

2. 请根据 [**配置 QAIRT 环境变量**](qai-appbuilder#配置-qairt-环境变量) 配置 QAIRT 环境变量。
   :::

## 运行示例

### 安装依赖

<NewCodeBlock tip="Device" type="device">

```bash
pip3 install requests tqdm qai-hub py3_wget opencv-python torch torchvision
```

</NewCodeBlock>

### 运行脚本

- 进入示例目录

      <Tabs>

  <TabItem value="QCS6490">

         <NewCodeBlock tip="Device" type="device">

         ```bash
         cd ai-engine-direct-helper/samples/linux/python
         ```

          </NewCodeBlock>


          </TabItem>

          <TabItem value="QCS9075">

         <NewCodeBlock tip="Device" type="device">

          ```bash
          cd ai-engine-direct-helper/samples/python
          ```

          </NewCodeBlock>

      </TabItem>

      </Tabs>

- 准备输入图片，这里以以下图片为输入示例

  {" "}

  <div style={{ textAlign: "center" }}>
    <img src="/img/dragon/q6a/test_image.webp" style={{ width: "65%" }} />
    input image
  </div>

- 执行推理

    <NewCodeBlock tip="Device" type="device">

  ```bash
  python3 inception_v3/inception_v3.py --image ./inception_v3/input.jpg
  ```

    </NewCodeBlock>

  ```bash
  $ python3 inception_v3/inception_v3.py --image ./inception_v3/input.jpg
       0.0ms [WARNING]  <W> Initializing HtpProvider

  /prj/qct/webtech_scratch20/mlg_user_admin/qaisw_source_repo/rel/qairt-2.37.1/point_release/SNPE_SRC/avante-tools/prebuilt/dsp/hexagon-sdk-5.5.5/ipc/fastrpc/rpcmem/src/rpcmem_android.c:38:dummy call to rpcmem_init, rpcmem APIs will be used from libxdsprpc
       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

     221.6ms [WARNING] Time: Read model file to memory. 17.28

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

     258.5ms [WARNING] Time: contextCreateFromBinary. 36.82

     258.5ms [WARNING] Time: UnmapViewOfFile. 0.00

     260.2ms [WARNING] Time: model_initialize inceptionV3 260.14

     332.1ms [WARNING] Time: model_inference inceptionV3 3.50

  Top 5 predictions for image:

  Samoyed 0.9998983145
  Arctic fox 0.000054331
  white wolf 0.0000345349
  Eskimo dog 0.0000035142
  Pomeranian 0.0000030651
       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

       0.0ms [WARNING]  <W> This META does not have Alloc2 Support

  /prj/qct/webtech_scratch20/mlg_user_admin/qaisw_source_repo/rel/qairt-2.37.1/point_release/SNPE_SRC/avante-tools/prebuilt/dsp/hexagon-sdk-5.5.5/ipc/fastrpc/rpcmem/src/rpcmem_android.c:42:dummy call to rpcmem_deinit, rpcmem APIs will be used from libxdsprpc
     443.3ms [WARNING] Time: model_destroy inceptionV3 105.74
  ```

  打印结果可以看到 `Samoyed` 置信度最高，这与输入图片内容吻合。
